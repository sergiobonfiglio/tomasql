// Code generated by table-def-gen. DO NOT EDIT.

package {{.Package}}

{{- if or .Imports (ne (TomasqlImportMode) "none") }}
import (
	{{- if eq (TomasqlImportMode) "full" }}
	"github.com/sergiobonfiglio/tomasql"
	{{- else if eq (TomasqlImportMode) "dot" }}
	. "github.com/sergiobonfiglio/tomasql"
	{{- end }}
	{{- range .Imports }}
	"{{ . }}"
	{{- end }}
)
{{- end }}
{{- range .Tables }}
{{ template "table-def" . }}
{{- end }}

{{- define "table-def" }}
type {{ .TypeDefName }}TableDef struct {
    *{{TomasqlPrefix}}SqlableTable
	alias *string
    {{- range .Columns }}
    {{- block "column-field" . }}
    {{ .Name }} *{{TomasqlPrefix}}Col[{{ .Type }}]
    {{- end }}
    {{- end }}
}

var _ {{TomasqlPrefix}}Table = &{{ .TypeDefName }}TableDef{}

func new{{ .TypeDefName }}Table() *{{ .TypeDefName }}TableDef {
	tDef := &{{ .TypeDefName }}TableDef{}
	{{- range .Columns }}
	{{- block "column-init" . }}
	tDef.{{ .Name }} = {{TomasqlPrefix}}NewCol[{{ .Type }}]("{{ .SqlName }}", tDef)
	{{- end }}
	{{- end }}
	tDef.SqlableTable = {{TomasqlPrefix}}NewSqlableTable(tDef)
	return tDef
}

var {{ .TypeDefName }} = new{{ .TypeDefName }}Table()

func (a *{{ .TypeDefName }}TableDef) TableName() string {
	return "{{ .SqlName }}"
}

func (a *{{ .TypeDefName }}TableDef) Alias() *string {
	return a.alias
}

func (a *{{ .TypeDefName }}TableDef) As(x string) *{{ .TypeDefName }}TableDef {
	newT := new{{ .TypeDefName }}Table()
	newT.alias = &x
	return newT
}

func (a *{{ .TypeDefName }}TableDef) Star() {{TomasqlPrefix}}ParametricSql {
	return {{TomasqlPrefix}}NewCol[string]("*", a)
}
{{- end }}

